<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Demande de Rendez-vous - SystemsMatic</title>
    <link rel="stylesheet" href="styles/base.css" />
    <link rel="stylesheet" href="styles/editor.css" />
  </head>
  <body>
    <div class="controls">
      <a href="index.html" class="back-link">â† Retour Ã  l'index</a>
      <h2>ğŸ“… Template : Demande de Rendez-vous</h2>
      <div
        style="
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
          gap: 15px;
        "
      >
        <div class="control-group">
          <label for="contactName">Nom du contact</label>
          <input
            type="text"
            id="contactName"
            value="Jean Dupont"
            onchange="updatePreview()"
          />
        </div>
        <div class="control-group">
          <label for="requestedDate">Date souhaitÃ©e</label>
          <input
            type="text"
            id="requestedDate"
            value="Lundi 15 janvier 2024 Ã  14h30"
            onchange="updatePreview()"
          />
        </div>
        <div class="control-group">
          <label for="reason">Motif</label>
          <input
            type="text"
            id="reason"
            value="Maintenance systÃ¨me informatique"
            onchange="updatePreview()"
          />
        </div>
        <div class="control-group">
          <label for="reasonOther">PrÃ©cision (optionnel)</label>
          <input
            type="text"
            id="reasonOther"
            value="Ralentissements sur les serveurs"
            onchange="updatePreview()"
          />
        </div>
        <div class="control-group">
          <label for="message">Message (optionnel)</label>
          <textarea id="message" onchange="updatePreview()">
Bonjour, j'aimerais programmer une intervention pour la maintenance de nos serveurs. Nous avons remarquÃ© quelques ralentissements rÃ©cents et souhaiterions une vÃ©rification complÃ¨te.</textarea
          >
        </div>
        <div class="control-group">
          <label for="cancelUrl">URL d'annulation</label>
          <input
            type="text"
            id="cancelUrl"
            value="https://systemsmatic.com/cancel/12345"
            onchange="updatePreview()"
          />
        </div>
      </div>
      <div style="margin-top: 15px">
        <button class="btn" onclick="resetData()">ğŸ”„ RÃ©initialiser</button>
        <button class="btn btn-secondary" onclick="copyCode()">
          ğŸ“‹ Copier le code
        </button>
      </div>
    </div>

    <div class="editor-container">
      <div class="editor-panel">
        <div class="editor-header">ğŸ“ Code HTML/CSS</div>
        <div class="editor-content">
          <textarea
            id="codeEditor"
            class="code-editor"
            onchange="updatePreview()"
          >
<div class="email-container">
    <div class="email-header">
        <img src="https://res.cloudinary.com/dfqpyuhyj/image/upload/v1758333945/1755694814429f_-_Ramco_tpoknd.jpg" 
             alt="SystemsMatic" class="email-logo">
        <div class="email-header-title">SystemsMatic</div>
    </div>

    <div class="email-content">
        <div class="greeting">Bonjour <span id="contactNameDisplay">Jean Dupont</span>,</div>
        
        <div class="paragraph">
            Nous avons bien reÃ§u votre demande de rendez-vous et nous vous en remercions. 
            Notre Ã©quipe va l'examiner attentivement et vous recontacter rapidement pour 
            confirmer la date et l'heure.
        </div>

        <div class="info-box">
            <div class="info-box-title">RÃ©capitulatif de votre demande</div>
            <div class="info-box-text">
                <p>
                    <strong>Date souhaitÃ©e :</strong><br>
                    <span id="requestedDateDisplay">Lundi 15 janvier 2024 Ã  14h30</span>
                </p>
                <p>
                    <strong>Motif :</strong><br>
                    <span id="reasonDisplay">Maintenance systÃ¨me informatique</span>
                </p>
                <p id="reasonOtherDisplay" style="display: none;">
                    <strong>PrÃ©cision :</strong><br>
                    <span id="reasonOtherText">Ralentissements sur les serveurs</span>
                </p>
                <p id="messageDisplay" style="display: none; white-space: pre-wrap; line-height: 1.6;">
                    <strong>Message :</strong><br>
                    <span id="messageText">Bonjour, j'aimerais programmer une intervention pour la maintenance de nos serveurs. Nous avons remarquÃ© quelques ralentissements rÃ©cents et souhaiterions une vÃ©rification complÃ¨te.</span>
                </p>
            </div>
        </div>

        <div class="info-box info">
            <div class="info-box-title">Prochaines Ã©tapes</div>
            <div class="info-box-text">
                ğŸ“ Nous vous contacterons sous 24h<br>
                ğŸ“… Confirmation de la date et heure<br>
                âœ… Validation de votre rendez-vous<br>
                ğŸ“‹ PrÃ©paration de l'intervention
            </div>
        </div>

        <div class="button-container">
            <a href="#" class="action-button danger" id="cancelButton">ğŸš« Annuler cette demande</a>
        </div>

        <div class="footer-note">
            En cas de question urgente, n'hÃ©sitez pas Ã  nous contacter directement.
        </div>
    </div>

    <hr class="email-hr">

    <div class="email-footer">
        <div class="email-footer-text">SystemsMatic</div>
        <div class="email-footer-text">
            Cet email a Ã©tÃ© envoyÃ© automatiquement, merci de ne pas y rÃ©pondre directement.
        </div>
    </div>
</div>
                </textarea
          >
        </div>
      </div>

      <div class="preview-panel">
        <div class="preview-header">ğŸ‘ï¸ PrÃ©visualisation</div>
        <div class="preview-content">
          <div id="preview"></div>
        </div>
      </div>
    </div>

    <script>
      function updatePreview() {
        const code = document.getElementById("codeEditor").value;
        const preview = document.getElementById("preview");

        // Mettre Ã  jour les donnÃ©es dynamiques
        const contactName = document.getElementById("contactName").value;
        const requestedDate = document.getElementById("requestedDate").value;
        const reason = document.getElementById("reason").value;
        const reasonOther = document.getElementById("reasonOther").value;
        const message = document.getElementById("message").value;
        const cancelUrl = document.getElementById("cancelUrl").value;

        preview.innerHTML = code;

        // Mettre Ã  jour les Ã©lÃ©ments avec des IDs spÃ©cifiques
        const contactNameDisplay = preview.querySelector("#contactNameDisplay");
        if (contactNameDisplay) contactNameDisplay.textContent = contactName;

        const requestedDateDisplay = preview.querySelector(
          "#requestedDateDisplay"
        );
        if (requestedDateDisplay)
          requestedDateDisplay.textContent = requestedDate;

        const reasonDisplay = preview.querySelector("#reasonDisplay");
        if (reasonDisplay) reasonDisplay.textContent = reason;

        const reasonOtherDisplay = preview.querySelector("#reasonOtherDisplay");
        const reasonOtherText = preview.querySelector("#reasonOtherText");
        if (reasonOther && reasonOther.trim()) {
          if (reasonOtherDisplay) reasonOtherDisplay.style.display = "block";
          if (reasonOtherText) reasonOtherText.textContent = reasonOther;
        } else {
          if (reasonOtherDisplay) reasonOtherDisplay.style.display = "none";
        }

        const messageDisplay = preview.querySelector("#messageDisplay");
        const messageText = preview.querySelector("#messageText");
        if (message && message.trim()) {
          if (messageDisplay) messageDisplay.style.display = "block";
          if (messageText) messageText.textContent = message;
        } else {
          if (messageDisplay) messageDisplay.style.display = "none";
        }

        const cancelButton = preview.querySelector("#cancelButton");
        if (cancelButton) cancelButton.href = cancelUrl;
      }

      function resetData() {
        document.getElementById("contactName").value = "Jean Dupont";
        document.getElementById("requestedDate").value =
          "Lundi 15 janvier 2024 Ã  14h30";
        document.getElementById("reason").value =
          "Maintenance systÃ¨me informatique";
        document.getElementById("reasonOther").value =
          "Ralentissements sur les serveurs";
        document.getElementById("message").value =
          "Bonjour, j'aimerais programmer une intervention pour la maintenance de nos serveurs. Nous avons remarquÃ© quelques ralentissements rÃ©cents et souhaiterions une vÃ©rification complÃ¨te.";
        document.getElementById("cancelUrl").value =
          "https://systemsmatic.com/cancel/12345";
        updatePreview();
      }

      function copyCode() {
        const code = document.getElementById("codeEditor").value;
        navigator.clipboard.writeText(code).then(() => {
          alert("Code copiÃ© dans le presse-papiers !");
        });
      }

      // Initialiser la prÃ©visualisation
      updatePreview();
    </script>
  </body>
</html>
